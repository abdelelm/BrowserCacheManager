!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:this,function(){return function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}return o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(r,n,function(e){return t[e]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o(o.s=0)}({"./lib/storageManager.js":
/*!*******************************************!*\
  !*** ./lib/storageManager.js + 1 modules ***!
  \*******************************************/
/*! exports provided: StorageManager */function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),e}var i=function(){function t(e){if(n(this,t),this.type=e.type||"text",this.options=e,this.length=0,this.name=e.cacheName||"BrowserCacheManager",!caches)throw new Error("Cache not available")}return s(t,[{key:"init",value:function(){var t=this;caches.open(this.name).then(function(e){t.cache=e})}},{key:"clearThisCache",value:function(){return this.cache?this.clear(this.name):Promise.resolve()}},{key:"getItemName",value:function(e){return"string"!=typeof e?e:(this.options.prefix||"")+e+(this.options.postfix||"")}},{key:"getItems",value:function(){var r=this;return this.cache?this.cache.keys().then(function(e){var t=e.map(function(t){return r.getItem(t).then(function(e){return{key:t.url,value:e}})});return Promise.all(t).then(function(e){var t={};return e.forEach(function(e){e.key&&(t[e.key]=e.value)}),t})}):Promise.resolve([])}},{key:"clear",value:function(t){return caches.keys().then(function(e){return Promise.all(e.map(function(e){return t&&e!==t?Promise.resolve():caches.delete(e)})).then(function(e){})})}},{key:"getItem",value:function(e){return this.cache?this.cache.match(this.getItemName(e)):Promise.resolve()}},{key:"key",value:function(t){return this.cache?this.cache.keys().then(function(e){return e[t]}):Promise.resolve()}},{key:"removeItem",value:function(e){return this.cache?this.cache.delete(this.getItemName(e)):Promise.resolve()}},{key:"setItem",value:function(e,t){return this.cache?this.cache.put(this.getItemName(e),new Response(t)):Promise.resolve()}}]),t}(),a=function(){function t(e){if(n(this,t),this.storage=localStorage,this.options=e,!this.storage)throw new Error("SessionStorage not available")}return s(t,[{key:"init",value:function(){}},{key:"getItemName",value:function(e){return(this.options.prefix||"")+e+(this.options.postfix||"")}},{key:"getItems",value:function(){var t=this;return new Promise(function(e){return e(Object.assign({},t.storage))})}},{key:"clear",value:function(){var t=this;return new Promise(function(e){e(t.storage.clear())})}},{key:"getItem",value:function(t){var r=this;return new Promise(function(e){e(r.storage.getItem(r.getItemName(t)))})}},{key:"key",value:function(t){var r=this;return new Promise(function(e){e(r.storage.key(t))})}},{key:"removeItem",value:function(t){var r=this;return new Promise(function(e){e(r.storage.removeItem(r.getItemName(t)))})}},{key:"setItem",value:function(t,r){var n=this;return new Promise(function(e){e(n.storage.setItem(n.getItemName(t),r))})}},{key:"length",get:function(){return this.storage.length}}]),t}(),u=function(){function t(e){if(n(this,t),this.storage=sessionStorage,this.options=e,!this.storage)throw new Error("SessionStorage not available")}return s(t,[{key:"init",value:function(){}},{key:"getItemName",value:function(e){return(this.options.prefix||"")+e+(this.options.postfix||"")}},{key:"getItems",value:function(){var t=this;return new Promise(function(e){return e(Object.assign({},t.storage))})}},{key:"clear",value:function(){var t=this;return new Promise(function(e){e(t.storage.clear())})}},{key:"getItem",value:function(t){var r=this;return new Promise(function(e){e(r.storage.getItem(r.getItemName(t)))})}},{key:"key",value:function(t){var r=this;return new Promise(function(e){e(r.storage.key(t))})}},{key:"removeItem",value:function(t){var r=this;return new Promise(function(e){e(r.storage.removeItem(r.getItemName(t)))})}},{key:"setItem",value:function(t,r){var n=this;return new Promise(function(e){e(n.storage.setItem(n.getItemName(t),r))})}},{key:"length",get:function(){var t=this;return new Promise(function(e){return e(t.storage.length)})}}]),t}();function c(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function f(e,t,r){return t&&c(e.prototype,t),r&&c(e,r),e}r.d(t,"StorageManager",function(){return h});var l=["session","local","cache"],p=function(r){var n={};return l.forEach(function(e,t){n[e]=r[t]}),n},h=function(){function o(e){var t=this;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),e||(e=["cache","session","local"]),("string"==typeof e||Array.isArray(e))&&(e={type:e}),"string"==typeof e.type&&(e.type=[e.type]),!Array.isArray(e.type))throw Error("Invalid options.type value ( array or string )");this.options=e,this.setSupportedStorage(e),this.options.type=this.options.type.map(function(e){return t.supportedStorage[e]}).filter(function(e){return!!e}),0==this.options.type.length&&this.warn("No supported storage for this browser"),this.storage=this.options.type[0];var r=function(){var e=t.supportedStorage[n];t[n+"Storage"]=function(){return Object.assign(Object.create(Object.getPrototypeOf(t)),t,{storage:e})}};for(var n in this.supportedStorage)r()}return f(o,[{key:"warn",value:function(){try{for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];console.warn.apply(console,t)}catch(e){}}},{key:"setSupportedStorage",value:function(e){this.supportedStorage={};try{this.supportedStorage.local=new a(e),this.supportedStorage.local.init()}catch(e){}try{this.supportedStorage.session=new u(e),this.supportedStorage.session.init()}catch(e){}try{this.supportedStorage.cache=new i(e),this.supportedStorage.cache.init()}catch(e){}return this.supportedStorage}}]),f(o,[{key:"parseResponse",value:function(n,e){return new Promise(function(t){if(!n)return n;var r;try{switch(e&&e.toLowerCase?e.toLowerCase():"default"){case"json":r="function"==typeof n.json?n.json.bind(n):Promise.resolve(JSON.parse(n));break;case"raw":r=Promise.resolve(n);break;case"blob":r="function"==typeof n.blob?n.blob.bind(n):Promise.resolve(new Blob(n));break;case"formData":r="function"==typeof n.formData?n.formData.bind(n):Promise.resolve(new FormData(n));break;default:r="function"==typeof n.text?n.text.bind(n):Promise.resolve(n)}}catch(e){console.error(e),r=Promise.resolve(n)}"function"==typeof r?r().then(t).catch(function(e){return t(e)}):r.then(t).catch(function(){return t(n)})})}},{key:"getItem",value:function(e,t){var r=this;return this.storage?this.storage.getItem(e).then(function(e){return r.parseResponse(e,t||r.options.responseType)}):Promise.resolve(null)}},{key:"removeItem",value:function(e){return this.storage?this.storage.removeItem(e):Promise.resolve(!1)}},{key:"setItem",value:function(e,t){return this.storage?this.storage.setItem(e,t):Promise.resolve(!1)}},{key:"key",value:function(e){return this.storage?this.storage.key(e):Promise.resolve()}},{key:"clear",value:function(){return this.storage?this.storage.clear():Promise.resolve()}},{key:"getItems",value:function(t){var r=this;return this.storage?this.storage.getItems().then(function(n){if(!n)return Promise.resolve({});var e=Object.keys(n).map(function(e){return r.parseResponse(n[e],t||r.options.responseType)});return Promise.all(e).then(function(r){return Object.keys(n).forEach(function(e,t){n[e]=r[t]}),n})}):Promise.resolve({})}},{key:"length",value:function(){return this.storage.length}},{key:"allStorages",value:function(){var o=this;return{clear:function(){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].clear():Promise.resolve(null)});return Promise.all(e).then(p)},getItem:function(t,r){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].getItem(t).then(function(e){return o.parseResponse(e,r||o.options.responseType)}):Promise.resolve(null)});return Promise.all(e).then(p)},getItems:function(t){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].getItems().then(function(n){if(!n)return Promise.resolve({});var e=Object.keys(n).map(function(e){return o.parseResponse(n[e],t||o.options.responseType)});return Promise.all(e).then(function(r){return Object.keys(n).forEach(function(e,t){n[e]=r[t]}),n})}):Promise.resolve({})});return Promise.all(e).then(p)},removeItem:function(t){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].removeItem(t):Promise.resolve(null)});return Promise.all(e).then(p)},setItem:function(t,r){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].setItem(t,r):Promise.resolve(null)});return Promise.all(e).then(p)},key:function(t){var e=l.map(function(e){return o.supportedStorage[e]?o.supportedStorage[e].key(t):Promise.resolve(null)});return Promise.all(e).then(function(r){var n={};return l.forEach(function(e,t){n[e]=r[t]}),n})}}}}]),o}()},0:
/*!*************************************!*\
  !*** multi ./lib/storageManager.js ***!
  \*************************************/
/*! no static exports found */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,r){e.exports=r(/*! C:\Users\aelmansouri\Desktop\project\NPM_PACKAGE\Browser\BrowserCacheManager/lib/storageManager.js */"./lib/storageManager.js")}})});